# Release-plz configuration for Unity Asset Parser
# This file configures how release-plz manages releases for our Rust workspace

[workspace]
# åŸºç¡€é…ç½®
allow_dirty = false                    # ä¸å…è®¸åœ¨è„å·¥ä½œç›®å½•ä¸­å‘å¸ƒ
changelog_update = true                # å¯ç”¨ CHANGELOG æ›´æ–°
changelog_config = "./cliff.toml"      # ä½¿ç”¨è‡ªå®šä¹‰çš„ git-cliff é…ç½®
dependencies_update = true             # åœ¨ release PR ä¸­è¿è¡Œ `cargo update`
git_release_enable = true              # å¯ç”¨ GitHub releases
git_tag_enable = true                  # å¯ç”¨ git tags
semver_check = true                    # å¯ç”¨ API ç ´åæ€§å˜æ›´æ£€æŸ¥

# PR é…ç½®
pr_branch_prefix = "release-plz-"      # Release PR åˆ†æ”¯å‰ç¼€
pr_labels = ["release", "automated"]   # ä¸º Release PR æ·»åŠ æ ‡ç­¾
pr_draft = false                       # ä¸åˆ›å»ºè‰ç¨¿ PR

# å‘å¸ƒé…ç½®
publish = true                         # å¯ç”¨å‘å¸ƒåˆ° crates.io
publish_timeout = "10m"                # è®¾ç½®å‘å¸ƒè¶…æ—¶æ—¶é—´
release_always = false                 # åªåœ¨åˆå¹¶ release PR æ—¶å‘å¸ƒ

# Git release é…ç½®
git_release_name = "v{{version}}"      # Git release åç§°æ ¼å¼
git_release_body = """
## ğŸš€ Unity Asset Parser {{version}}

### ğŸ“‹ Changes in this release

{{ changelog }}

### ğŸ“¦ Installation

#### Library
```toml
[dependencies]
unity-asset = "{{version}}"
```

#### CLI Tools
```bash
cargo install unity-asset-cli --version {{version}}
```

### ğŸ”— Crates.io Links

- [unity-asset](https://crates.io/crates/unity-asset) - Main library
- [unity-asset-cli](https://crates.io/crates/unity-asset-cli) - CLI tools
- [unity-asset-core](https://crates.io/crates/unity-asset-core) - Core types
- [unity-asset-yaml](https://crates.io/crates/unity-asset-yaml) - YAML support
- [unity-asset-binary](https://crates.io/crates/unity-asset-binary) - Binary support

{% if remote.contributors %}
### ğŸ‘¥ Contributors
{% for contributor in remote.contributors %}
* @{{ contributor.username }}
{% endfor %}
{% endif %}
"""

# Git tag é…ç½®
git_tag_name = "{{package}}-v{{version}}"  # æ¯ä¸ªåŒ…ç‹¬ç«‹çš„ tag

# åŒ…ç‰¹å®šé…ç½®
[[package]]
name = "unity-asset-core"
# æ ¸å¿ƒåŒ…ï¼Œæ— ç‰¹æ®Šé…ç½®ï¼Œä½¿ç”¨é»˜è®¤è®¾ç½®

[[package]]
name = "unity-asset-yaml"
# YAML è§£æåŒ…ï¼Œæ— ç‰¹æ®Šé…ç½®

[[package]]
name = "unity-asset-binary"
# äºŒè¿›åˆ¶è§£æåŒ…ï¼Œæ— ç‰¹æ®Šé…ç½®

[[package]]
name = "unity-asset"
# ä¸»åº“åŒ…ï¼Œåˆ›å»ºç»Ÿä¸€çš„ CHANGELOG
changelog_path = "./CHANGELOG.md"
changelog_include = [
    "unity-asset-core",
    "unity-asset-yaml", 
    "unity-asset-binary"
]
git_release_enable = true              # åªä¸ºä¸»åŒ…åˆ›å»º GitHub release
git_tag_name = "v{{version}}"          # ä¸»åŒ…ä½¿ç”¨ç®€å•çš„ç‰ˆæœ¬æ ‡ç­¾

[[package]]
name = "unity-asset-cli"
# CLI å·¥å…·åŒ…ï¼Œæ— ç‰¹æ®Šé…ç½®

# Changelog é…ç½®
[changelog]
# ä¿æŠ¤ç ´åæ€§å˜æ›´æäº¤ï¼Œç¡®ä¿å®ƒä»¬æ€»æ˜¯åŒ…å«åœ¨ changelog ä¸­
protect_breaking_commits = true
